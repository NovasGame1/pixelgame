<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PixelGame - Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page-wrapper">
    <header>
      <h1>PixelGame</h1>
      <nav>
        <a href="index.html">Home</a>
        <a href="games.html">Games</a>
        <a href="profile.html">Your Profile</a>
        <a href="people.html">People</a>
                <a href="shop.html">Shop</a>
        <a href="admin.html" id="adminBtn" style="display: none;">Admin Panel</a>
        <a href="login.html" id="loginLink">Login</a>
        <a href="#" id="logoutLink" style="display: none;" onclick="logout()">Logout</a>
      </nav>
    </header>

    <main>
      <div class="section-box">
        <h2>Log In / Sign Up</h2>

        <form onsubmit="saveProfile(); return false;">
          <label for="username">Username:</label><br>
          <input type="text" id="username" placeholder="Enter your username" required><br><br>

          <label for="password">Password:</label><br>
          <input type="password" id="password" placeholder="Enter your password" required><br><br>

          <button type="submit">Create Account / Log In</button>
        </form>

        <hr style="margin: 30px 0;">

        <button onclick="continueAsGuest()">Continue as Guest</button>
      </div>
    </main>

    <footer>
      Â© 2025 PixelGame.
    </footer>
  </div>

<script>
  document.getElementById("loginForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value;
    const userData = JSON.parse(localStorage.getItem("userData")) || {};

    if (!userData[username]) {
      alert("User not found.");
      return;
    }

    const user = userData[username];

    // ðŸ”’ Banned User Check
    const now = Date.now();
    if (user.isBanned) {
      if (user.banExpires && now > user.banExpires) {
        // Auto-unban if time passed
        user.isBanned = false;
        delete user.banReason;
        delete user.banExpires;
        localStorage.setItem("userData", JSON.stringify(userData));
      } else {
        let msg = "ðŸš« Your account has been banned.";
        msg += "\n\nReason: " + (user.banReason || "No reason provided.");
        if (user.banExpires) {
          msg += "\nBan expires: " + new Date(user.banExpires).toLocaleString();
        } else {
          msg += "\nBan duration: Permanent";
        }
        alert(msg);
        return;
      }
    }

    if (user.password !== password) {
      alert("Incorrect password.");
      return;
    }

    localStorage.setItem("profileUsername", username);
    localStorage.setItem("profileBio", user.bio || "");
    window.location.href = "profile.html";
  });
</script>





  
</body>
</html>
