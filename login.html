<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PixelGame - Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page-wrapper">
    <header>
      <h1>PixelGame</h1>
<nav>
  <a href="index.html">Home</a>
  <a href="games.html">Games</a>
  <a href="profile.html">Profile</a>
  <a href="login.html" id="loginLink">Login</a>
  <a href="#" id="logoutLink" style="display: none;" onclick="logout()">Logout</a>
</nav>

    </header>

    <main>
      <div class="section-box">
        <h2>Login / Set Profile</h2>

        <form onsubmit="saveProfile(); return false;">
          <label for="username">Username:</label><br>
          <input type="text" id="username" placeholder="Enter your username" required><br><br>

          <label for="bio">Bio:</label><br>
          <textarea id="bio" placeholder="Tell us about yourself..." rows="5" cols="40" required></textarea><br><br>

          <button type="submit">Save Profile</button>
        </form>
      </div>
    </main>

    <footer>
      © 2025 PixelGame.
    </footer>
  </div>

<script>
  function saveProfile() {
    const username = document.getElementById('username').value.trim();
    const bio = document.getElementById('bio').value.trim();

    if (!username || !bio) {
      alert('Please fill in both username and bio.');
      return;
    }

    // Load list of all registered usernames
    let users = JSON.parse(localStorage.getItem('registeredUsers')) || [];

    // If the username is already taken...
    if (users.includes(username)) {
      // ...check if the current session was previously logged in as that user
      const currentUser = localStorage.getItem('profileUsername');
      if (currentUser === username) {
        // Just restore the session
        localStorage.setItem('profileUsername', username);
        localStorage.setItem('profileBio', bio);
        alert('Welcome back, ' + username + '!');
        window.location.href = 'profile.html';
        return;
      } else {
        // Allow login only if it's your own account (optional: implement real login check)
        alert('Username already exists. Please log in as that user or pick a different name.');
        return;
      }
    }

    // Username is new – register it
    users.push(username);
    localStorage.setItem('registeredUsers', JSON.stringify(users));

    // Save profile data
    localStorage.setItem('profileUsername', username);
    localStorage.setItem('profileBio', bio);

    alert('Account created! Redirecting to your profile...');
    window.location.href = 'profile.html';
  }
</script>




  <script>
  // Function to check login status and toggle navigation links
  function updateNavLinks() {
    const username = localStorage.getItem('profileUsername');
    const loginLink = document.getElementById('loginLink');
    const logoutLink = document.getElementById('logoutLink');

    if (username) {
      // User is logged in
      loginLink.style.display = 'none';
      logoutLink.style.display = 'inline';
    } else {
      // User is not logged in
      loginLink.style.display = 'inline';
      logoutLink.style.display = 'none';
    }
  }

  // Logout function
  function logout() {
    localStorage.removeItem('profileUsername');
    localStorage.removeItem('profileBio');
    // Optionally, remove other related items
    updateNavLinks();
    window.location.href = 'login.html';
  }

  // Initialize navigation links on page load
  document.addEventListener('DOMContentLoaded', updateNavLinks);
</script>

</body>
</html>
